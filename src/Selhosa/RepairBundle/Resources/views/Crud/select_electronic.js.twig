<script>
    $('.typeahead').typeahead({
        source: {{ models | json_encode() | raw }}
    });

    var checkModelExists = function(form) {
        if ($('#'+form+'_model').val() !== "") {

            $.ajax({
                type: "GET",
                url: "{{ path('selhosa_electronic_ajax_does_model_exist') }}",
                data: { 'model' : $('#'+form+'_model').val() },
                success: function(data) {
                    if (!data.exists) {
                        $('#'+form+'_electronicCategories_control_group').show();
                    }
                },
                context: document.body
            }).done(function() {

                    });
        }
    };

    $('#doarepair_model').focusout(function() { checkModelExists('doarepair') });
    $('#ceplrepair_model').focusout(function() { checkModelExists('ceptlrepair') });

</script>